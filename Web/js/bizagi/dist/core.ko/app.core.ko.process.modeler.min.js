/*! ProcessModelerSimulation 2014-04-30 */
function getInitialDate(a){var b="";if("undefined"!=typeof a&&""!==a){var c=getStandardDate(a),d=" AM",e=c.getHours();e>12&&(e-=12,d=" PM"),b=padzero(c.getMonth()+1)+"/"+padzero(c.getDate())+"/"+padzero(c.getFullYear())+" "+padzero(e)+":"+padzero(c.getMinutes())+":"+padzero(c.getSeconds())+d}return b}function getStandardDate(a){var b="";if("undefined"!=typeof a&&""!==a){var c=a.split("T"),d=c[0].split("-"),e=c[1].split(":");b=new Date,b.setFullYear(Number(d[0])),b.setDate(Number(d[2])),b.setMonth(Number(d[1])-1),b.setHours(Number(e[0])),b.setMinutes(Number(e[1])),b.setSeconds(Number(e[2]))}return b}function padzero(a){return 10>a?"0"+a.toString():a.toString()}function resizeResourcesTabs(){var a=parseFloat($(window).height())-110+"px";$(".biz-ui-tab-item").css("height",a).css("max-height",a).css("min-height",a)}function calculateResizeHeightResults(){var a=parseFloat($(".biz-ui-results").width()),b=parseFloat($(window).height())-60+"px",c=parseFloat($(window).height())-100+"px";$(".biz-ui-scenario-data").css("min-width",a),$(".biz-ui-results-table .biz-ui-divider").css("max-width",a),$(".biz-ui-results-table").css("height",b).css("max-height",b).css("min-height",b),$(".biz-ui-selectableitemcontainer").css("height",c).css("max-height",c).css("min-height",c)}$.Class("bizagi.pm.bpsim.values.SingleValueEditor",{ensureNotNullValue:function(a){YUIAssert.isTrue(ko.isObservable(a));var b=a;return(null===b()||void 0===b())&&b({simpleValue:ko.observable("")}),(null===b().simpleValue()||void 0===b().simpleValue())&&b().simpleValue(""),b}}),$.Class("bizagi.pm.bpsim.parameters.model.ElementParametersModel",{init:function(){0===arguments.length?initEmptyObject():initFromJs(arguments.jsObject)},initEmptyObject:function(){this.allParametersValues=new bizagi.pm.bpsim.parameters.model.ElementParametersModel},initFromJs:function(a){this.allParametersValues=new bizagi.pm.bpsim.parameters.model.ElementParametersModel({jsObject:a.allParametersValues})}}),$.Class("bizagi.pm.bpsim.parameters.ElementParametersEditor",{init:function(a,b){this.allParameters=ko.observable(new bizagi.pm.bpsim.parameters.ParametersGroupsEditor(a.allParameters,b.allParametersValues,a.templateTexts,a.showButtons))},jqueryparametersGroupsEditor:function(){$(".biz-ui-accordion").length>0?$(".biz-ui-accordion").accordion({active:0,heightStyle:"auto",create:function(){$(".biz-ui-accordion .ui-accordion-content").height("auto"),setTimeout(function(){setWindowSize()},500)},activate:function(){setWindowSize()}}):($(".biz-ui-accordion .ui-accordion-content").height("auto"),setTimeout(function(){setWindowSize()},500))}}),$.Class("bizagi.pm.bpsim.parameters.ParametersGroupsEditor",{init:function(a,b,c,d){this.showButtons=d,this.okButtontext=c.okButtontext,this.cancelButtontext=c.cancelButtontext,this.allHeaderControlText=c.allControlsHeadertext?c.allControlsHeadertext:"All Controls",this.groups=ko.observableArray(ko.utils.arrayMap(a.groups,function(a){var d=ko.utils.arrayFirst(b.groupsValues(),function(b){return a.groupInternalName==b.groupInternalName()});return new bizagi.pm.bpsim.parameters.ParametersGroupItemEditor(a,d,c)}))},sortByDisplayOrder:function(){this.groups.sort(function(a,b){return a.groupInternalName<b.groupInternalName?-1:1})}}),ko.bindingHandlers.setAcceptClickEvent={init:function(a){$(a).button().click(function(a){a.preventDefault(),window.external.AcceptParametersEditor()})}},ko.bindingHandlers.setCancelClickEvent={init:function(a){$(a).button().click(function(a){a.preventDefault(),window.external.CancelParametersEditor()})}},$.Class("bizagi.pm.bpsim.parameters.ParametersGroupItemEditor",{init:function(a,b,c){this.groupInternalName=a.groupInternalName,this.displayName=ko.observable(a.displayName),this.description=ko.observable(a.description),this.parameters=ko.observable(new bizagi.pm.bpsim.parameters.ParametersListEditor(a.parameters,b.groupValues,c))}}),$.Class("bizagi.pm.bpsim.parameters.ParametersListEditor",{init:function(a,b,c){this.parametersItems=ko.observableArray(ko.utils.arrayMap(a.parametersItems,function(a){var d=ko.utils.arrayFirst(b.parametersValues(),function(b){return a.parameterInternalName==b.parameterInternalName()});return new bizagi.pm.bpsim.parameters.ParameterEditor(a,d,c)}))}}),$.Class("bizagi.pm.bpsim.parameters.ParameterEditor",{init:function(a,b,c){var d=this;d.parameterInternalName=a.parameterInternalName,ko.isObservable(b.item.value)||(b.item.value=ko.observable(b.item.value)),d.parameterDefinition=a,d.templateTexts=c,d.parameterInternalName=a.parameterInternalName,d.displayName=a.displayName,d.description=a.description,d.helpText=a.helpText?a.helpText:"",d.configureDataTypeButton(b)},configureDataTypeButton:function(a){var b=this;b.parameterValue=a,b.dataType=a.item.dataType,b.dataType.subscribe(function(){b.refreshValueControl()}),b.valueTemplateViewModel=ko.observable(),b.isBindingInitialized=!1,b.refreshValueControl(),b.parameterType=ko.observable(new bizagi.pm.bpsim.values.ParameterTypeEditor(b.parameterInternalName,b.dataType,b.parameterDefinition.validDataTypes))},refreshValueControl:function(){var a=this;a.isBindingInitialized&&a.previousDataType==a.dataType()||(a.isBindingInitialized?a.parameterValue.item.value(void 0):a.isBindingInitialized=!0,a.valueControlTemplate=a.getValueControlTemplate(a.dataType(),a.parameterValue,a.parameterInternalName,a.templateTexts),a.valueTemplateName=a.valueControlTemplate.getTemplateName(),a.valueTemplateViewModel(a.valueControlTemplate),a.previousDataType=a.dataType())},getValueControlTemplate:function(a,b,c,d){var e=this;return"String"==a?new bizagi.pm.bpsim.values.StringValueEditor(b.item.value):"Boolean"==a?new bizagi.pm.bpsim.values.BooleanValueEditor(c,b.item.value,d):"DateTime"==a?new bizagi.pm.bpsim.values.DateTimeValueEditor(b.item.value):"Duration"==a?new bizagi.pm.bpsim.values.DurationValueEditor(b.item.value,d):"Expression"==a?((null===b.item.value.simpleValue||void 0===b.item.value.simpleValue)&&(b.item.value.simpleValue=""),new bizagi.pm.bpsim.values.FunctionsValueEditor(e.parameterDefinition.expressionDefinition,b.item.value().expressionValue)):"Floating"==a?new bizagi.pm.bpsim.values.FloatingValueEditor(b.item.value):"Numeric"==a?new bizagi.pm.bpsim.values.NumericValueEditor(b.item.value):"BetaDistribution"==a||"BinomialDistribution"==a||"ErlangDistribution"==a||"GammaDistribution"==a||"LogNormalDistribution"==a||"NegativeExponentialDistribution"==a||"NormalDistribution"==a||"PoissonDistribution"==a||"TriangularDistribution"==a||"TruncatedNormalDistribution"==a||"UniformDistribution"==a||"WeibullDistribution"==a?new bizagi.pm.bpsim.values.CommonDistributionsValueEditor(a,b.item.value,d):"Enum"==a?new bizagi.pm.bpsim.values.EnumValuesContainer(b.item.value,d,e.parameterDefinition.validDataTypes,e.previousDataType,c):null}}),ko.bindingHandlers.jQueryParameterEditor={init:function(a,b,c,d){var e=b(),f="biz-ui-single",g=e.data().parameterTypeName?e.data().parameterTypeName.toLowerCase():"";"selection"===g&&(f="biz-ui-collection ui-corner-all"),d.parameterDefinition.validDataTypes.length<=1&&$(a).hide(),$(a).addClass(f)},update:function(){}},$.Class("bizagi.pm.bpsim.values.ParameterTypeEditor",{init:function(a,b,c){var d=this;d.dataType=ko.isObservable(b)?b:ko.observable(b),d.dataTypes=c,d.selectedDataType=d.dataType,d.parameterTypeName=a},changeTypeHandler:function(){window.external.ChangeParameterType(this.parameterTypeName.toString(),ko.mapping.toJSON(this.dataTypes).toString(),this.selectedDataType().toString())},getTemplateName:function(){return"bizagi-pm-bpsim-values-parameterTypeEditor-Template"}}),$.Class("bizagi.pm.bpsim.values.ParameterTypeSelector",{init:function(a,b,c){this.okButtontext=c.okButtontext,this.cancelButtontext=c.cancelButtontext,this.allFilterText=c.allFilterText,this.typeSelectorTitleText=c.typeSelectorTitleText||"Parameter Type Selector",this.okButtonHasValue=!1,this.cancelButtonHasValue=!1,void 0!==c&&null!==c&&(void 0!==c.okButtontext&&null!==c.okButtontext&&(this.okButtonHasValue=!0),void 0!==c.cancelButtontext&&null!==c.cancelButtontext&&(this.cancelButtonHasValue=!0)),this.parameterTypes=ko.observableArray(ko.utils.arrayMap(b,function(b){var c=(new bizagi.pm.bpsim.values.parameterTypeSelectorGroupFilter(a,b),new bizagi.pm.bpsim.values.parameterTypeSelectorGroup(a,b));return c}))},getTemplateName:function(){return"bizagi-pm-bpsim-values-parameterTypeSelector-Template"}}),ko.bindingHandlers.acceptClickEvent={init:function(a){$(a).button().click(function(a){a.preventDefault(),window.external.AcceptParametersTypeSelector()})}},ko.bindingHandlers.cancelClickEvent={init:function(a){$(a).button().click(function(a){a.preventDefault(),window.external.CancelParametersTypeSelector()})}},$.Class("bizagi.pm.bpsim.values.ParameterTypeSelectorItem",{init:function(a,b){this.itemName=b.name,this.itemType=b.type,this.itemDescription=b.description,this.selectedDataType=a,this.lastValue=a()},changeTypeHandler:function(){this.selectedDataType(this.itemType),$(":radio:last").attr("checked",!0)},getTemplateName:function(){return"bizagi-pm-bpsim-values-parameterTypeSelectorItem-Template"},acceptSelection:function(){window.external.AcceptParametersTypeSelector()}}),trimSpacesInText=function(a,b){return b.replace(/\W*\s(\S)*$/,"...")},ko.bindingHandlers.jQueryParameterTypeSelectorItem={init:function(a,b,c){var d=$(a),e=d.closest(".parameter-wrapper"),f=c();f.lastValue===f.type&&e.addClass("biz-ui-active"),d.click(function(){$(".parameter-wrapper").removeClass("biz-ui-active"),e.addClass("biz-ui-active")})}},ko.bindingHandlers.jQueryParameterTypeSelectorItemTruncate={update:function(a,b){var c=b(),d=c.description,e=$(a);setTimeout(function(){var a=e.closest(".parameter-control").height();for(e.text(d);e.closest(".parameter-content").outerHeight()>a;)e.text(trimSpacesInText),e.attr("title",d)},500)}},$.Class("bizagi.pm.bpsim.values.parameterTypeSelectorGroup",{init:function(a,b){this.groupName=b.groupName,this.groupId=b.groupId,this.items=ko.observableArray(ko.utils.arrayMap(b.items,function(b){return new bizagi.pm.bpsim.values.ParameterTypeSelectorItem(a,b)}))},getTemplateName:function(){return"bizagi-pm-bpsim-values-parameterTypeSelectorGroup-Template"}}),$.Class("bizagi.pm.bpsim.values.parameterTypeSelectorGroupFilter",{init:function(a,b){this.groupName=b.groupName,this.groupId=b.groupId},getTemplateName:function(){return"bizagi-pm-bpsim-values-parameterTypeSelectorGroupFilter-Template"}}),ko.bindingHandlers.jQueryParameterFilterClick={init:function(a){var b=$(a),c=b.parents(".parameter-filter");b.click(function(){var a=b.attr("id"),d=$("."+a);$(".parameter-type").hide(),d.length>0?d.show():$(".parameter-type").show(),$(".biz-ui-active",c).removeClass(),b.addClass("biz-ui-active")})}},$.Class("bizagi.pm.bpsim.values.ResultRequestEditor",{init:function(a,b){var c=this,d=null;null!==a&&(d=ko.utils.arrayFilter(b.resultRequestOptions,function(b){return-1!=ko.utils.arrayIndexOf(a,b.value)})),c.allResults=ko.observableArray(b.resultRequestOptions),c.selectedResults=ko.observableArray(d),c.allOptions={options:c.options,selected:c.selected}}}),ko.bindingHandlers.dropdownchecklist={init:function(a){$(a).dropdownchecklist({icon:{placement:"right",toOpen:" ui-icon-triangle-1-w ui-dropdownchecklist",toClose:"ui-widget-header ui-icon-triangle-1-s"},maxDropHeight:120,width:50})},update:function(a){$(a).dropdownchecklist("destroy"),ko.bindingHandlers.options.update.apply(this,arguments),$(a).dropdownchecklist({icon:{placement:"right",toOpen:" ui-icon-triangle-1-w ui-dropdownchecklist",toClose:"ui-widget-header ui-icon-triangle-1-s"},maxDropHeight:120,width:50})}},bizagi.pm.bpsim.values.SingleValueEditor("bizagi.pm.bpsim.values.NumericValueEditor",{init:function(a){var b=this,c=b.ensureNotNullValue(a);b.simpleValue=c().simpleValue,b.integerValue=new bizagi.pm.bpsim.common.IntegerNumberControl(b.simpleValue,!0)},getTemplateName:function(){return"bizagi-pm-bpsim-values-numericValueEditor-Template"}}),bizagi.pm.bpsim.values.SingleValueEditor("bizagi.pm.bpsim.values.StringValueEditor",{init:function(a){YUIAssert.isTrue(ko.isObservable(a));var b=this,c=b.ensureNotNullValue(a);b.simpleValue=c().simpleValue},getTemplateName:function(){return"bizagi-pm-bpsim-values-stringValueEditor-Template"}}),bizagi.pm.bpsim.values.SingleValueEditor("bizagi.pm.bpsim.values.DurationValueEditor",{init:function(a,b){var c=this,d=c.ensureNotNullValue(a),e=nezasa.iso8601.Period.parse(d().simpleValue());c.days=ko.observable(e[2]),c.hours=ko.observable(e[3]),c.minutes=ko.observable(e[4]),c.seconds=ko.observable(e[5]),c.daysText=b.daysText?b.daysText:"Days",c.hoursText=b.hoursText?b.hoursText:"Hrs",c.minutesText=b.minutesText?b.minutesText:"Min",c.secondsText=b.secondsText?b.secondsText:"Secs",c.days.subscribe(function(){a().simpleValue(c.timeSpanToISO8601Period())}),c.hours.subscribe(function(){a().simpleValue(c.timeSpanToISO8601Period())}),c.minutes.subscribe(function(){a().simpleValue(c.timeSpanToISO8601Period())}),c.seconds.subscribe(function(){a().simpleValue(c.timeSpanToISO8601Period())})},getTemplateName:function(){return"bizagi-pm-bpsim-values-durationValueEditor-Template"},timeSpanToISO8601Period:function(){var a=this,b="P",c=parseFloat(a.days()),d=parseFloat(a.hours()),e=parseFloat(a.minutes()),f=parseFloat(a.seconds()),g=isNaN(c)?"0D":c+"D",h=isNaN(d)?"0H":d+"H",i=isNaN(e)?"0M":e+"M",j=isNaN(f)?"0S":f+"S",k=!1;return 0!==a.days()&&(b+=g),0!==a.hours()&&(b=b+"T"+h,k=!0),0!==a.minutes()&&(k?b+=i:(b=b+"T"+i,k=!0)),0!==a.seconds()&&(k?b+=j:(b=b+"T"+j,k=!0)),"P"==b?"":b}}),ko.bindingHandlers.jqueryDurationValueEditor={init:function(a){$(a).mask("? 9w 999d 99h 99s")},update:function(){}},ko.bindingHandlers.focus={init:function(a){$(a).focus(function(){var a=$(this);"0"===a.val()&&a.val(""),setTimeout(function(){a.select()},100)}),$(a).blur(function(){var a=$(this);""===a.val()&&a.val(0)})}},bizagi.pm.bpsim.values.SingleValueEditor("bizagi.pm.bpsim.values.BooleanValueEditor",{init:function(a,b,c){var d=this;this.internalName=a;var e=d.ensureNotNullValue(b);this.trueCaption=c.trueCaption,this.falseCaption=c.falseCaption,this.simpleValue=e().simpleValue},getTemplateName:function(){return"bizagi-pm-bpsim-values-booleanValueEditor-Template"}}),bizagi.pm.bpsim.values.SingleValueEditor("bizagi.pm.bpsim.values.FloatingValueEditor",{init:function(a){var b=this,c=b.ensureNotNullValue(a);b.simpleValue=c().simpleValue,b.floatingValue=new bizagi.pm.bpsim.common.FloatingNumberControl(b.simpleValue)},getTemplateName:function(){return"bizagi-pm-bpsim-values-floatingValueEditor-Template"}}),bizagi.pm.bpsim.values.SingleValueEditor("bizagi.pm.bpsim.values.DateTimeValueEditor",{init:function(a){var b=this,c=b.ensureNotNullValue(a);this.selectedDate=ko.observable(getInitialDate(c().simpleValue())),this.simpleValue=ko.computed({read:function(){var a="";if(this.selectedDate().length>0){var b=new Date(this.selectedDate()),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds();a=c+"-"+padzero(d)+"-"+padzero(e)+"T"+padzero(f)+":"+padzero(g)+":"+padzero(h)}return a},write:function(a){this.selectedDate(getStandardDate(a))},owner:this}),this.simpleValue.subscribe(function(a){c().simpleValue(a)})},getTemplateName:function(){return"bizagi-pm-bpsim-values-dateTimeValueEditor-Template"}}),$.Class("bizagi.pm.bpsim.values.CommonDistributionsValueEditor",{init:function(a,b,c){var d=this;(null===b()||void 0===b())&&b({}),(null===b().distributionValue||void 0===b().distributionValue)&&b({distributionValue:{value1:ko.observable(""),value2:ko.observable(""),value3:ko.observable(""),value4:ko.observable("")}}),d.dataType=a,d.parameterTypeText=d.setParameterTypeText(a,c),d.shapeText=c.distributions.shape,d.scaleText=c.distributions.scale,d.probabilityText=c.distributions.probability,d.trialsText=c.distributions.trials,d.meanText=c.distributions.mean,d.kText=c.distributions.k,d.standardDeviationText=c.distributions.standardDeviation,d.minText=c.distributions.min,d.maxText=c.distributions.max,d.mostLikelyText=c.distributions.mostLikely,d.value1=b().distributionValue.value1,d.value2=b().distributionValue.value2,d.value3=b().distributionValue.value3,d.value4=b().distributionValue.value4,d.value1=new bizagi.pm.bpsim.common.FloatingNumberControl(b().distributionValue.value1),d.value2="BinomialDistribution"==d.dataType||"ErlangDistribution"==d.dataType?new bizagi.pm.bpsim.common.IntegerNumberControl(b().distributionValue.value2,!0):new bizagi.pm.bpsim.common.FloatingNumberControl(b().distributionValue.value2),d.value3=new bizagi.pm.bpsim.common.FloatingNumberControl(b().distributionValue.value3),d.value4=new bizagi.pm.bpsim.common.FloatingNumberControl(b().distributionValue.value4)},getTemplateName:function(){return"bizagi-pm-bpsim-values-commonDistributionsValueEditor-Template"},setParameterTypeText:function(a,b){switch(a){default:case"BetaDistribution":return b.distributions.betaDistributionTypeText;case"BinomialDistribution":return b.distributions.binomialDistributionTypeText;case"ErlangDistribution":return b.distributions.erlangDistributionTypeText;case"GammaDistribution":return b.distributions.gammaDistributionTypeText;case"LogNormalDistribution":return b.distributions.logNormalDistributionTypeText;case"NegativeExponentialDistribution":return b.distributions.negativeExponentialDistributionTypeText;case"NormalDistribution":return b.distributions.normalDistributionTypeText;case"PoissonDistribution":return b.distributions.poissonDistributionTypeText;case"TriangularDistribution":return b.distributions.triangularDistributionTypeText;case"TruncatedNormalDistribution":return b.distributions.truncatedNormalDistributionTypeText;case"UniformDistribution":return b.distributions.uniformDistributionTypeText;case"UserDistribution":return b.distributions.userDistributionTypeText;case"WeibullDistribution":return b.distributions.weibullDistributionTypeText}},setSpinner:function(){}}),$.Class("bizagi.pm.bpsim.values.EnumValueEditor",{init:function(a,b,c,d,e,f){var g=this;g.removeText=f,g.itemType=a,ko.isObservable(b)||(b=ko.observable(b)),g.enumerationItem=b,g.parentRemoveItemHandler=d,g.valueControlTemplate=g.getEnumItemControlTemplate(g.itemType,b,c,e),g.valueTemplateName=g.valueControlTemplate.getTemplateName(),g.valueTemplateViewModel=ko.observable(g.valueControlTemplate)},getTemplateName:function(){return"bizagi-pm-bpsim-values-enumValueEditor-Template"},getEnumerationItem:function(){return this.enumerationItem},getEnumItemControlTemplate:function(a,b,c,d){return"String"==a?new bizagi.pm.bpsim.values.StringValueEditor(b):"Numeric"==a?new bizagi.pm.bpsim.values.NumericValueEditor(b):"Boolean"==a?new bizagi.pm.bpsim.values.BooleanValueEditor(d,b,c):"Floating"==a?new bizagi.pm.bpsim.values.FloatingValueEditor(b):"Duration"==a?new bizagi.pm.bpsim.values.DurationValueEditor(b,c):"DateTime"==a?new bizagi.pm.bpsim.values.DateTimeValueEditor(b):null},removeItem:function(){this.parentRemoveItemHandler(this)}}),$.Class("bizagi.pm.bpsim.values.EnumValuesContainer",{init:function(a,b,c,d,e){var f=this;f.internalName=e,f.addText=b.enumeration.add,f.removeText=b.enumeration.remove,f.enumerationElementsText=b.enumeration.enumerationElements,f.validDataTypes=c[0],(null===a()||void 0===a())&&a({}),(null===a().enumValue||void 0===a().enumValue)&&a({enumValue:{itemsType:ko.observable(f.validateDataType(d)),items:ko.observableArray([])}}),ko.isObservable(a().enumValue.itemsType)||(a().enumValue.itemsType=ko.observable(a().enumValue.itemsType)),ko.isObservable(a().enumValue.items)||(a().enumValue.items=ko.observable(a().enumValue.items)),f.removeItemHandler=function(a){f.removeItem(a)},f.items=a().enumValue.items,f.templateTexts=b,f.configureEnumDataTypeButton(a,[f.validDataTypes])},configureEnumDataTypeButton:function(a,b){var c=this;c.itemsType=a().enumValue.itemsType,c.itemsType.subscribe(function(){c.refreshEnumItemsControl()}),c.itemsTemplatesViewModels=ko.observableArray(),c.isBindingInitialized=!1,c.refreshEnumItemsControl(),c.enumItemsDataTypeViewModel=ko.observable(new bizagi.pm.bpsim.values.ParameterTypeEditor(c.internalName,c.itemsType,b))},refreshEnumItemsControl:function(){var a=this;a.isBindingInitialized&&a.itemsType==a.itemsType()||(a.isBindingInitialized?a.items=a.clearItemsArray(a.items):a.isBindingInitialized=!0,a.itemsControlsTemplates=ko.utils.arrayMap(a.items(),function(b){return new bizagi.pm.bpsim.values.EnumValueEditor(a.itemsType(),b,a.templateTexts,a.removeItemHandler,a.internalName,a.removeText)}),a.itemsTemplatesViewModels.removeAll(),a.itemsTemplatesViewModels(a.itemsControlsTemplates))},clearItemsArray:function(a){for(var b=0;b<a().length;b++)a()[b].simpleValue("");return a},validateDataType:function(a){var b=this;return"String"==a||"Boolean"==a||"Duration"==a||"DateTime"==a||"Floating"==a||"Numeric"==a?a:b.validDataTypes.items[0].type},getTemplateName:function(){return"bizagi-pm-bpsim-values-enumValuesContainer-Template"},addNewItem:function(){var a=this,b={simpleValue:ko.observable("")};a.items.push(b);var c=new bizagi.pm.bpsim.values.EnumValueEditor(a.itemsType(),b,a.templateTexts,a.removeItemHandler,a.internalName,a.removeText);a.itemsTemplatesViewModels.push(c)},showModel:function(){var a=this;alert(JSON.stringify(a.items,null,2))},removeItem:function(a){var b=this;b.items.remove(a.getEnumerationItem()()),b.itemsTemplatesViewModels.remove(a)}}),$.Class("bizagi.pm.bpsim.values.model.SimpleValueModel",{init:function(){var a=this;0===arguments.length?a.initEmptyObject():a.initFromJs(arguments[0])},initEmptyObject:function(){var a=this;a.value=ko.mapping.fromJS({simpleValue:""})},initFromJs:function(a){YUIAssert.isTrue(ko.isObservable(a));var b=this;b.value={simpleValue:a().simpleValue}}}),$.Class("bizagi.pm.bpsim.values.FunctionRadioButton",{init:function(a,b){var c=this;c.functionName=b.functionName,c.type=a.type,c.displayText=a.displayText}}),$.Class("bizagi.pm.bpsim.values.FunctionsRadioButtons",{init:function(a,b){var c=this;c.functions=ko.observableArray(ko.utils.arrayMap(a.functions,function(a){return new bizagi.pm.bpsim.values.FunctionRadioButton(a,b)}))}}),$.Class("bizagi.pm.bpsim.values.FunctionsValueEditor",{init:function(a,b){var c=this;c.functions=new bizagi.pm.bpsim.values.FunctionsRadioButtons(a.functionsDefinition,b),c.valuesViewModel=new bizagi.pm.bpsim.values.MultipleResourceSelector(a.resourcesDefinition,b),c.functionName=b.functionName},getTemplateName:function(){return"bizagi-pm-bpsim-values-functionsValueEditor-Template"}}),$.Class("bizagi.pm.bpsim.values.MultipleResourceSelector",{init:function(a,b){var c=this;c.avalaibleResources=a,c.multipleResources=b.multipleResources,0===c.multipleResources().length&&c.buildResourcesEmptyArray(),c.resources=ko.observableArray(ko.utils.arrayMap(a.resources,function(a){var b=ko.utils.arrayFirst(c.multipleResources(),function(b){return a.bpmnId==b.bpmnId()});return new bizagi.pm.bpsim.values.MultipleResourceSelectorItem(a,b)}))},buildResourcesEmptyArray:function(){for(var a=this,b=0;b<a.avalaibleResources.resources.length;b++)a.multipleResources.push({bpmnId:ko.observable(a.avalaibleResources.resources[b].bpmnId),quantity:ko.observable(0),selected:ko.observable(!1)})},getTemplateName:function(){return"bizagi-pm-bpsim-values-multipleResourceSelector-Template"}}),$.Class("bizagi.pm.bpsim.values.MultipleResourceSelectorItem",{init:function(a,b){var c=this;c.name=a.name,c.selected=b.selected,c.quantity=b.quantity,c.selectedStatus=ko.computed(function(){return c.selected()?"":"biz-ui-hide"}),c.selected.subscribe(function(){c.refreshIntegerControl()}),c.refreshIntegerControl()},refreshIntegerControl:function(){var a=this;a.selected()||a.quantity(0),a.integerData=new bizagi.pm.bpsim.common.IntegerNumberControl(a.quantity,a.selected)},getTemplateName:function(){return"bizagi-pm-bpsim-values-multipleResourceSelectorItem-Template"},onkeypress:function(a,b){return isNaN(String.fromCharCode(b.keyCode))?!1:!0}}),$.Class("bizagi.pm.bpsim.probability.probabilityControl",{init:function(a,b){var c=this;if(c.displayName=b.probability,c.helpText=b.helpText,c.okButton=b.okButton,c.cancelButton=b.cancelButton,c.sequenceFlows=a.sequenceFlows,c.sequenceFlowsArr=c.sequenceFlows(),c.slidersQuantity=c.sequenceFlows().length,c.sliderOptions=[],c.slidersQuantity>2){for(var d=0;d<c.slidersQuantity;d++){var e=c.sliderOptions[d-1]?c.sliderOptions[d-1]:0,f=parseFloat(c.sequenceFlowsArr[d].probability())+e;100>f&&f>0&&c.sliderOptions.push(f)}0===parseFloat(c.sequenceFlowsArr[c.slidersQuantity-1].probability())&&c.sliderOptions.push(100)}else c.sliderOptions.push(100-c.sequenceFlowsArr[1].probability())}}),ko.bindingHandlers.jQueryProbability={init:function(a,b){var c=$(a),d=this,e=b();d.redrawWidthBoxes=function(a,b){("number"==typeof b||"string"==typeof b)&&(b=[b]);var c=d.recalculatePercents({values:b});d.assignValues(c)},d.recalculatePercents=function(a){var b=a.values||[a.value];b.push(100);for(var c=[],d=0;d<b.length;d++){var e=b[d-1]?b[d-1]:0,f=b[d],g=f-e;c.push(g)}return c},d.assignValues=function(a){{var b=0;$("#sliderProbability")}$("input").each(function(){$(this).val(a[b]),$(this).change(),b++})};var f={slide:function(a,b){var e=$(".ui-slider-handle",c),f=$(b.handle).siblings("a").andSelf().index(b.handle),g=$(this).slider("value");if(e.length>1&&(g=$(this).slider("values")),e.length>1){var h=(0===f||b.value>g[f-1])&&(f==g.length-1||b.value<g[f+1]);return h&&d.redrawWidthBoxes(f,g),h}d.redrawWidthBoxes(f,g)},change:function(a,b){d.recalculatePercents(b)}};e.values.length>1?$.extend(f,{min:0,max:100,values:e.values}):$.extend(f,{value:e.values[0]}),c.slider(f),$(".sliderControl-box-wrapper").last().addClass("sliderControl-box-wrapper-last"),$(".ui-slider-handle",c).addClass("biz-ui-icon"),$("#okButton").click(function(){window.external.AcceptProbabilityEditor()}),$("#cancelButton").click(function(){window.external.CancelProbabilityEditor()})},update:function(){}},$.Class("bizagi.pm.bpsim.calendars.CalendarsSelectionList",{init:function(a,b){var c=this;c.calendars=a,c.selectedCalendarId=b,c.firstWasSelected=!1}}),ko.bindingHandlers.calendarsSelectionListClickBinding={init:function(a,b,c,d,e){e.$parent.firstWasSelected||($(a).addClass("ui-selected").siblings().removeClass("ui-selected"),e.$parent.firstWasSelected=!0),$(a).click(function(){$(a).addClass("ui-selected").siblings().removeClass("ui-selected");var b=$(a).attr("id");e.$parent.selectedCalendarId(b)})}},$.Class("bizagi.pm.bpsim.calendars.CalendarValueEditor",{init:function(a,b){var c=this;c.scheduleText=b.scheduleText,c.displayNameText=b.displayNameText||"",c.intervalStartText=b.intervalStartText,c.startTime=b.startTime,c.intervalEndText=b.intervalEndText,c.recurrenceText=b.recurrenceText,c.recurrenceTypes=b.recurrenceTypes,c.rangeText=b.rangeText,c.intervalDurationText=b.intervalDurationText||"Duration",c.intervalEndText=b.intervalEndText||"End",c.minutesText=b.minutesText||"minutes",c.hourText=b.hourText||"hour",c.hoursText=b.hoursText||"hours",c.dayText=b.dayText||"day",c.daysText=b.daysText||"days",c.weekText=b.weekText||"week",c.weeksText=b.weeksText||"weeks",c.rangeTitleText=b.rangeTitleText||"Range",c.calendarLegendText=b.calendarLegendText||"Calendar",c.calendarDisplayName=a.displayName,c.startDateTime=ko.observable(c.getFormatDate(a.startDateTime).fullDate),c.selectedStartFullDate=ko.observable(c.startDateTime()),c.selectDuration=ko.observable(a.duration()),c.selectedEndDate=ko.observable(c.getEndDate(c.selectedStartFullDate,c.selectDuration)),c.selectedStartTime=ko.observable(c.getFormatDate(a.startDateTime).time),c.selectedStartDate=ko.observable(c.getFormatDate(a.startDateTime).date),c.selectedStartDate.subscribe(function(b){var d=b+" "+c.selectedStartTime();c.startDateTime(c.getFormatDate(c.mapDateToJson(d,a.startDateTime)).fullDate),c.selectedStartFullDate(c.startDateTime())}),c.selectDuration.subscribe(function(b){c.selectedEndDate(c.getEndDate(c.selectedStartFullDate,ko.observable(b))),a.duration(b)}),c.selectedStartTime.subscribe(function(b){var d=c.selectedStartDate()+" "+b;c.startDateTime(c.getFormatDate(c.mapDateToJson(d,a.startDateTime)).fullDate)}),c.recurrenceType=a.recurrenceType,c.dailyRecurrenceViewModel=ko.observable(new bizagi.pm.bpsim.calendars.DailyRecurrenceEditor(a.dailyRecurrence,b)),c.weeklyRecurrenceViewModel=ko.observable(new bizagi.pm.bpsim.calendars.WeeklyRecurrenceEditor(a.weeklyRecurrence,b)),c.monthlyRecurrenceViewModel=ko.observable(new bizagi.pm.bpsim.calendars.MonthlyRecurrenceEditor(a.monthlyRecurrence,b)),c.yearlyRecurrenceViewModel=ko.observable(new bizagi.pm.bpsim.calendars.YearlyRecurrenceEditor(a.yearlyRecurrence,b)),c.recurrenceRangeViewModel=ko.observable(new bizagi.pm.bpsim.calendars.RecurrenceRangeEditor(a.recurrenceRange,b)),c.rageHours=ko.observableArray([{value:"0m",label:"0 "+c.minutesText},{value:"5m",label:"5 "+c.minutesText},{value:"10m",label:"10 "+c.minutesText},{value:"15m",label:"15 "+c.minutesText},{value:"30m",label:"30 "+c.minutesText},{value:"1h",label:"1 "+c.hoursText},{value:"2h",label:"2 "+c.hoursText},{value:"3h",label:"3 "+c.hoursText},{value:"4h",label:"4 "+c.hoursText},{value:"5h",label:"5 "+c.hoursText},{value:"6h",label:"6 "+c.hoursText},{value:"7h",label:"7 "+c.hoursText},{value:"8h",label:"8 "+c.hoursText},{value:"9h",label:"9 "+c.hoursText},{value:"10h",label:"10 "+c.hoursText},{value:"0.5d",label:"0.5 "+c.daysText},{value:"18h",label:"18 "+c.hoursText},{value:"1d",label:"1 "+c.dayText},{value:"2d",label:"2 "+c.daysText},{value:"3d",label:"3 "+c.daysText},{value:"4d",label:"4 "+c.daysText},{value:"1w",label:"1 "+c.weekText},{value:"2w",label:"2 "+c.weeksText},{value:"3w",label:"3 "+c.weeksText},{value:"4w",label:"4 "+c.weeksText}])},jQuerySelectStyle:function(a){$("select",a).selectStyle()},getFormatDate:function(a){var b=this,c="";if("undefined"!=typeof a&&""!==a){var d=b.getStandardDate(a),e=" AM",f=d.getHours();12===f?e=" PM":0===f?(f=12,e=" AM"):f>=12&&(f-=12,e=" PM");var g=b.padzero(f)+":"+b.padzero(d.getMinutes())+e,h=b.padzero(d.getMonth()+1)+"/"+b.padzero(d.getDate())+"/"+b.padzero(d.getFullYear()),i=h+" "+g;c={time:g,date:h,fullDate:i}}return c},getStandardDate:function(a){var b="";return"undefined"!=typeof a&&""!==a&&(b=new Date,b.setFullYear(a.year()),b.setDate(a.day()),b.setMonth(a.month()-1),b.setHours(a.hours()),b.setMinutes(a.minutes()),b.setSeconds(a.seconds())),b},padzero:function(a){return 10>a?"0"+a.toString():a.toString()},mapDateToJson:function(a,b){var c=new Date(a);return b.year(c.getFullYear()),b.month(c.getMonth()+1),b.day(c.getDate()),b.hours(c.getHours()),b.minutes(c.getMinutes()),b.seconds(c.getSeconds()),b},changeData:function(a){this.recurrenceType=a},getEndDate:function(a,b){var c=this,d=b(),e=new Date(a()),f=d.substring(d.length-1,d.length);switch(f){case"m":e.setMinutes(e.getMinutes()+parseFloat(d.replace("m","")));break;case"h":e.setHours(e.getHours()+parseFloat(d.replace("h","")));break;case"d":var g=parseFloat(d.replace("d",""));e.setHours(e.getHours()+c.cDH(g));break;case"w":var h=parseFloat(d.replace("w",""));e.setHours(e.getHours()+c.cWH(h))}return e},cDH:function(a){return 24*a},cWH:function(a){return this.cDH(this.cWD(a))},cWD:function(a){return 7*a}}),ko.bindingHandlers.dateTimeSetControl={init:function(a){$(a).datetimepicker({changeMonth:!0,changeYear:!0,showSecond:!0,timeFormat:"hh:mm:ss TT"})}},ko.bindingHandlers.dateEndSetControl={init:function(a){$(a).timepicker({timeFormat:"hh:mm:ss TT"})}},ko.bindingHandlers.timeSpinner={init:function(a){$(a).timespinner(),$.mask.definitions["+"]="[01]",$.mask.definitions["~"]="[APap]",$.mask.definitions.m="[0-5]",$.mask.definitions["-"]="[Mm]",$(a).mask("+9:m9 ~-",{placeholder:"_"}),$(a).parent().click(function(){$(a).change()})}},ko.bindingHandlers.calendarDatePicker={init:function(a){$(a).datepicker(),$.mask.definitions["+"]="[01]",$.mask.definitions["~"]="[0-9]",$.mask.definitions["-"]="[0-3]",$.mask.definitions.p="[0-9]",$(a).mask("+~/-p/9999",{placeholder:"_"})}},ko.bindingHandlers.enterkey={init:function(a,b,c){var d=(c(),"input,textarea,select");
$(document).on("keypress",d,function(b){var c=b.target;if(0!==$(c).parents().add(c).filter(a).length)return 13===b.which?(c.blur(),!1):!0})}},$.Class("bizagi.pm.bpsim.calendars.CalendarsContainer",{init:function(a,b){var c=this;ko.isObservable(a.calendars)||(a.calendars=ko.observable(a.calendars)),c.calendarTitleText=b.calendarTitleText,c.calendars=a.calendars,c.selectedCalendarId=ko.observable(""),c.selectedCalendar={},c.emptyCalendars=b.emptyCalendars||"Empty Calendars, click in add to create a new Calendar",c.add=b.add||"Add",c.remove=b.remove||"Delete",c.calendarsListViewModel=ko.observable(),c.selectedCalendarViewModel=ko.observable(),0!==c.calendars().length&&(c.selectedCalendar=a.calendars()[0],c.selectedCalendarId(c.selectedCalendar.calendarId()),c.calendarsListViewModel(new bizagi.pm.bpsim.calendars.CalendarsSelectionList(c.calendars,c.selectedCalendarId,b)),c.selectedCalendarViewModel(new bizagi.pm.bpsim.calendars.CalendarValueEditor(c.selectedCalendar,b))),c.selectedCalendarId.subscribe(function(a){c.selectedCalendar=c.getSelectedCalendar(c.calendars(),a),c.selectedCalendarViewModel(new bizagi.pm.bpsim.calendars.CalendarValueEditor(c.selectedCalendar,b))}),c.calendars.subscribe(function(){c.calendarsListViewModel(new bizagi.pm.bpsim.calendars.CalendarsSelectionList(c.calendars,c.selectedCalendarId,b))})},getSelectedCalendar:function(a,b){for(var c=0;c<a.length;c++)if(a[c].calendarId()==b)return a[c]},removeCalendar:function(){var a=this;a.calendars.remove(a.selectedCalendar)},jQuerySelectStyle:function(a){$("select",a).selectStyle()}}),ko.bindingHandlers.calendarsContainerSetAddClickEvent={init:function(a){$(a).click(function(a){a.preventDefault(),window.external.AddNewCalendar()})}},$.Class("bizagi.pm.bpsim.calendars.DailyRecurrenceEditor",{init:function(a,b){var c=this;c.everyText=b.everyText,c.daysText=b.daysText,""===a.days()&&a.days("0"),c.days=a.days},onkeypress:function(a,b){return isNaN(String.fromCharCode(b.keyCode))?!1:!0},onblur:function(a){return""===a.days()&&a.days("1"),!0}}),$.Class("bizagi.pm.bpsim.calendars.WeeklyRecurrenceEditor",{init:function(a,b){var c=this;c.reccursEveryText=b.reccursEveryText,c.weeksOnText=b.weeksOnText,c.sundayText=b.sundayText,c.mondayText=b.mondayText,c.tuesdayText=b.tuesdayText,c.wednesdayText=b.wednesdayText,c.thursdayText=b.thursdayText,c.fridayText=b.fridayText,c.saturdayText=b.saturdayText,c.weeks=a.weeks,c.sunday=a.sunday,c.monday=a.monday,c.tuesday=a.tuesday,c.wednesday=a.wednesday,c.thursday=a.thursday,c.friday=a.friday,c.saturday=a.saturday},onkeypress:function(a,b){return isNaN(String.fromCharCode(b.keyCode))?!1:!0},onblur:function(a){return""===a.weeks()&&a.weeks("1"),!0}}),$.Class("bizagi.pm.bpsim.calendars.MonthlyRecurrenceEditor",{init:function(a,b){var c=this;c.dayText=b.dayText,c.ofEveryText=b.ofEveryText,c.monthsText=b.monthsText,c.theText=b.theText,c.ordinals=b.ordinals,c.weekDays=b.weekDays,c.months=a.months,c.byMothDaySelected=a.byMothDaySelected,c.monthDay=a.monthDay,c.ordinal=a.ordinal,c.weekDay=a.weekDay},onNumericControlkeypress:function(a,b){return isNaN(String.fromCharCode(b.keyCode))?!1:!0},onNumericMonthDayControlblur:function(a){return""===a.monthDay()&&a.monthDay("1"),!0},onNumericMonthsControlblur:function(a){return""===a.months()&&a.months("1"),!0}}),$.Class("bizagi.pm.bpsim.calendars.NumericCalendarValue",{init:function(a){var b=this;b.simpleValue=a},onkeypress:function(a,b){return isNaN(String.fromCharCode(b.keyCode))?!1:!0}}),$.Class("bizagi.pm.bpsim.calendars.YearlyRecurrenceEditor",{init:function(a,b){var c=this;""===a.years()&&a.years("0"),c.reccursEveryText=b.reccursEveryText,c.yearsText=b.yearsText,c.onText=b.onText,c.onTheText=b.onTheText,c.months=b.months,c.ordinals=b.ordinals,c.weekDays=b.weekDays,c.ofText=b.ofText,c.years=a.years,c.monthDay=a.monthDay,c.byMonthDayMonthNumber=a.byMonthDayMonthNumber,c.selectedMonthRule=a.selectedMonthRule,c.selectedOrdinal=a.selectedOrdinal,c.selectedWeekDay=a.selectedWeekDay,c.byDayMonthNumber=a.byDayMonthNumber},onNumericControlkeypress:function(a,b){return isNaN(String.fromCharCode(b.keyCode))?!1:!0},onNumericYearsControlblur:function(a){return""===a.years()&&a.years("1"),!0},onNumericMonthsControlblur:function(a){return""===a.monthDay()&&a.monthDay("1"),!0}}),$.Class("bizagi.pm.bpsim.calendars.RecurrenceRangeEditor",{init:function(a,b){var c=this;c.noEndDateText=b.noEndDateText,c.endAfterText=b.endAfterText,c.occurrencesText=b.occurrencesText,c.endByText=b.endByText,c.rangeTypeSelected=a.rangeTypeSelected,c.occurrences=a.occurrences,c.untilDateTimeViewModel=ko.observable(c.getFormatDate(a.untilDateTime).date),c.untilDateTimeViewModel.subscribe(function(){c.getFormatDate(c.mapDateToJson(c.untilDateTimeViewModel(),a.untilDateTime)),a.untilDateTime.hours("23"),a.untilDateTime.minutes("59"),a.untilDateTime.seconds("59")})},mapDateToJson:function(a,b){var c=new Date(a);return b.year(c.getFullYear()),b.month(c.getMonth()+1),b.day(c.getDate()),b.hours(c.getHours()),b.minutes(c.getMinutes()),b.seconds(c.getSeconds()),b},onkeypress:function(a,b){return isNaN(String.fromCharCode(b.keyCode))?!1:!0},onblur:function(a){return""===a.occurrences()&&a.occurrences("1"),!0},getFormatDate:function(a){var b=this,c="";if("undefined"!=typeof a&&""!==a.year()){var d=b.getStandardDate(a),e=" PM";d.setHours("23"),d.setMinutes("59"),d.setSeconds("59");var f=d.getHours();month=d.getMonth();var g=b.padzero(f)+":"+b.padzero(d.getMinutes())+e,h=b.padzero(d.getMonth()+1)+"/"+b.padzero(d.getDate())+"/"+b.padzero(d.getFullYear()),i=h+" "+g;c={time:g,date:h,fullDate:i}}return c},getStandardDate:function(a){var b="";return"undefined"!=typeof a&&""!==a&&(b=new Date,b.setFullYear(a.year()),b.setDate(a.day()),b.setMonth(a.month()-1),b.setHours(a.hours()),b.setMinutes(a.minutes()),b.setSeconds(a.seconds())),b},padzero:function(a){return 10>a?"0"+a.toString():a.toString()}}),ko.bindingHandlers.calendarDatePicker={init:function(a){$(a).datepicker(),$.mask.definitions["+"]="[01]",$.mask.definitions["~"]="[0-9]",$.mask.definitions["-"]="[0-3]",$.mask.definitions.p="[0-9]",$(a).mask("+~/-p/9999",{placeholder:"_"})}},ko.bindingHandlers.enterkey={init:function(a,b,c){var d=(c(),"input,textarea,select");$(document).on("keypress",d,function(b){var c=b.target;if(0!==$(c).parents().add(c).filter(a).length)return 13===b.which?(c.blur(),!1):!0})}},$.Class("bizagi.pm.bpsim.scenario.ScenarioEditor",{init:function(a,b){var c=this;c.name=a.name,c.description=a.description,c.author=a.author,c.version=a.version,c.start=a.start,c.duration=a.duration,c.baseTimeUnit=a.baseTimeUnit,c.replication=a.replication,c.seed=a.seed,c.baseTimeUnitList=b.baseTimeUnitList,c.baseCurrencyUnitList=b.baseCurrencyUnitList,c.nameText=b.nameText,c.descriptionText=b.descriptionText,c.authorText=b.authorText,c.versionText=b.versionText,c.startText=b.startText,c.durationText=b.durationText,c.baseTimeUnitText=b.baseTimeUnitText,c.baseCurrencyUnitText=b.baseCurrencyUnitText,c.replicationText=b.replicationText,c.seedText=b.seedText,c.nameHelpText=b.nameHelpText,c.descriptionHelpText=b.descriptionHelpText,c.authorHelpText=b.authorHelpText,c.versionHelpText=b.versionHelpText,c.startHelpText=b.startHelpText,c.durationHelpText=b.durationHelpText,c.baseTimeUnitHelpText=b.baseTimeUnitHelpText,c.baseCurrencyUnitHelpText=b.baseCurrencyUnitHelpText,c.replicationHelpText=b.replicationHelpText,c.seedHelpText=b.seedHelpText,ko.isObservable(c.duration)||(c.duration=ko.observable(c.duration)),c.durationValueEditorViewModel=new bizagi.pm.bpsim.values.DurationValueEditor(c.duration,b),c.selectedStartDate=ko.observable(c.getFormatDate(c.start).date),c.selectedStartDate.subscribe(function(a){c.start=c.mapDateToJson(a,c.start)}),this.baseCurrencyUnit=ko.computed({read:function(){return a.baseCurrencyUnit.id()},write:function(b){for(var d=0;d<c.baseCurrencyUnitList.length;d++)if(c.baseCurrencyUnitList[d].id===b){a.baseCurrencyUnit.id(c.baseCurrencyUnitList[d].id),a.baseCurrencyUnit.name(c.baseCurrencyUnitList[d].name);break}},owner:this})},getStandardDate:function(a){var b="";return"undefined"!=typeof a&&""!==a&&(b=new Date,b.setFullYear(a.year()),b.setDate(a.day()),b.setMonth(a.month()-1),b.setHours(a.hours()),b.setMinutes(a.minutes()),b.setSeconds(a.seconds())),b},padzero:function(a){return 10>a?"0"+a.toString():a.toString()},mapDateToJson:function(a,b){if("__/__/____"!==a){var c=new Date(a);b.year(c.getFullYear()),b.month(c.getMonth()+1),b.day(c.getDate()),b.hours(c.getHours()),b.minutes(c.getMinutes()),b.seconds(c.getSeconds())}else b.year(""),b.month(""),b.day(""),b.hours(""),b.minutes(""),b.seconds("");return b},getFormatDate:function(a){var b=this,c="";if("undefined"!=typeof a&&""!==a){var d,e,f;if(""===a.year()&&""===a.month()&&""===a.day()&&""===a.hours()&&""===a.minutes()&&""===a.seconds())d="",e="",f="";else{var g=b.getStandardDate(a),h=" AM",i=g.getHours();12===i?h=" PM":0===i?(i=12,h=" AM"):i>=12&&(i-=12,h=" PM"),d=b.padzero(i)+":"+b.padzero(g.getMinutes())+h,e=b.padzero(g.getMonth()+1)+"/"+b.padzero(g.getDate())+"/"+b.padzero(g.getFullYear()),f=e+" "+d}c={time:d,date:e,fullDate:f}}return c}}),ko.bindingHandlers.renderSelect={init:function(){$("select").selectStyle()}},ko.bindingHandlers.calendarDatePicker={init:function(a){$(a).datepicker(),$.mask.definitions["+"]="[01]",$.mask.definitions["~"]="[0-9]",$.mask.definitions["-"]="[0-3]",$.mask.definitions.p="[0-9]",$(a).mask("+~/-p/9999",{placeholder:"_"})}},ko.bindingHandlers.enterkey={init:function(a,b,c){var d=(c(),"input,textarea,select");$(document).on("keypress",d,function(b){var c=b.target;if(0!==$(c).parents().add(c).filter(a).length)return 13===b.which?(c.blur(),!1):!0})}},$.Class("bizagi.pm.bpsim.scenario.ScenariosContainer",{init:function(a,b){var c=this;ko.isObservable(a.scenarios)||(a.scenarios=ko.observable(a.scenarios)),c.scenarioTitleText=b.scenarioTitleText,c.scenarios=a.scenarios,c.selectedScenarioId=a.selectedScenarioId,c.selectedScenario={},c.emptyScenarios=b.emptyScenarios||"Empty Scenarios, click in add to create a new Scenario",c.newScenario=b.newScenario||"Add",c.newScenarioContainer=b.newScenarioContainer||"New",c.deleteScenario=b.deleteScenario||"Delete",c.copyScenario=b.copyScenario||"Copy",c.exportScenario=b.exportScenario||"Export",c.scenariosListViewModel=ko.observable(),c.selectedScenarioViewModel=ko.observable(),""===c.selectedScenarioId()?(c.selectedScenario=a.scenarios()[0],c.selectedScenarioId(c.selectedScenario.id())):c.selectedScenario=c.getSelectedScenario(c.scenarios(),c.selectedScenarioId()),c.scenariosListViewModel(new bizagi.pm.bpsim.scenario.ScenariosSelectionList(c.scenarios,c.selectedScenarioId,b)),c.selectedScenarioViewModel(new bizagi.pm.bpsim.scenario.ScenarioEditor(c.selectedScenario,b.scenarioEditorTexts)),c.selectedScenarioId.subscribe(function(a){c.selectedScenario=c.getSelectedScenario(c.scenarios(),a),c.selectedScenarioViewModel(new bizagi.pm.bpsim.scenario.ScenarioEditor(c.selectedScenario,b.scenarioEditorTexts))}),c.scenarios.subscribe(function(){c.scenariosListViewModel(new bizagi.pm.bpsim.scenario.ScenariosSelectionList(c.scenarios,c.selectedScenarioId,b))})},getSelectedScenario:function(a,b){for(var c=0;c<a.length;c++)if(a[c].id()==b)return a[c]},splitButtonAction:function(){console.log("hola")},removeScenarioEvent:function(){window.external.DeleteScenario()},copyScenarioEvent:function(){window.external.CopyScenario()},exportScenarioEvent:function(){window.external.ExportScenario()},contextMenuAction:function(){var a={openContextMenu:function(b,c){var d=$(".biz-ui-contextmenu-button-container");d.addClass("isOpen").removeClass("isClose").show(),d.position({of:c,my:"left top",at:"right bottom",collision:"flip none"}),$(document).unbind("mouseup.contextmenu"),$(document).bind("mouseup.contextmenu",function(){$(this);a.closeContextMenu(b)})},closeContextMenu:function(a){var b=$(".biz-ui-contextmenu-button-container");b.addClass("isClose").removeClass("isOpen").hide(),$(document).unbind("mouseup.contextmenu")}};$("#selectable .ui-widget-content").bind("contextmenu",function(b){b.preventDefault();var c=$(".biz-ui-contextmenu-button-container",d),d=$(this);c.hasClass("isOpen")?a.closeContextMenu(d):($(this).trigger("click"),a.openContextMenu(d,b))})}}),ko.bindingHandlers.setAddClickEvent={init:function(a){$(a).click(function(a){a.preventDefault(),window.external.NewScenario()})}},ko.bindingHandlers.splitButtonAction={init:function(a){var b={closeDropDown:function(a){var b=a;$(".biz-ui-split-button-dropdown",b).addClass("isClose").removeClass("isOpen").hide(),$(document).unbind("mouseup.dropdown")},openDropDown:function(a){{var c=a;$(".biz-ui-split-button-dropdown",c)}$(".biz-ui-split-button-dropdown",c).addClass("isOpen").removeClass("isClose").show(),$(document).unbind("mouseup.dropdown"),$(document).bind("mouseup.dropdown",function(){$(this);b.closeDropDown(a)})}};$(a).click(function(){var a=$(this),c=$(".biz-ui-split-button-dropdown",a);c.hasClass("isOpen")?b.closeDropDown(a):b.openDropDown(a),$(".biz-ui-split-button-dropdown",a).position({of:a,my:"left bottom",at:"left top",collision:"none flip"})})}},$.Class("bizagi.pm.bpsim.scenario.ScenariosSelectionList",{init:function(a,b){var c=this;c.scenarios=a,c.selectedScenarioId=b,c.firstWasSelected=!1}}),ko.bindingHandlers.clickBinding={init:function(a,b,c,d,e){d.id()===e.$parent.selectedScenarioId()&&$(a).addClass("ui-selected").siblings().removeClass("ui-selected"),$(a).click(function(){$(a).addClass("ui-selected").siblings().removeClass("ui-selected");var b=$(a).attr("id");e.$parent.selectedScenarioId(b)})}},$.Class("bizagi.pm.bpsim.resources.ResourcesAvailability",{init:function(a,b){var c=this;c.resourcesText=a.templateTexts.resourcesText,c.resourcesCalendarsDefinition=a.resourcesCalendarsDefinitions,c.resources=ko.observableArray(ko.utils.arrayMap(a.resourcesDefinitions,function(a){var c=ko.utils.arrayFirst(b(),function(b){return a.resourceId==b.resourceId()});return new bizagi.pm.bpsim.resources.ResourceAvailabilityValuesRow(a,c)}))}}),$.Class("bizagi.pm.bpsim.resources.ResourceAvailabilityValuesRow",{init:function(a,b){var c=this;c.displayName=a.displayName,c.calendarsValues=ko.observableArray(ko.utils.arrayMap(b.calendarsValues(),function(a){return new bizagi.pm.bpsim.common.IntegerNumberControl(a.quantity,!0)}))}}),$.Class("bizagi.pm.bpsim.resources.ResourcesContainer",{init:function(a,b){var c=this;c.templateTexts=a.templateTexts,c.availabilityText=c.templateTexts.availabilityText,c.costsText=c.templateTexts.costsText,c.resourcesButtonText=c.templateTexts.resourcesButtonText,c.resourcesButtonTooltip=c.templateTexts.resourcesButtonTooltip,c.calendarsButtonText=c.templateTexts.calendarsButtonText,c.calendarsButtonTooltip=c.templateTexts.calendarsButtonTooltip,c.okButtonText=c.templateTexts.okButtonText,c.showCalendars=a.showCalendars,c.resourcesAvailabilityViewModel=new bizagi.pm.bpsim.resources.ResourcesAvailability(a,b.resourcesAvailabilityValues),c.resourcesCostsViewModel=new bizagi.pm.bpsim.resources.ResourcesCosts(a,b.resourcesCostsValues)},jqueryWindowsResize:function(){$(document).ready(function(){setTimeout(function(){resizeResourcesTabs()},10),$(window).resize(function(){resizeResourcesTabs()})})}}),ko.bindingHandlers.tabsCreator={init:function(a){$(a).tabs()}},$.Class("bizagi.pm.bpsim.resources.ResourcesCosts",{init:function(a,b){var c=this;c.templateTexts=a.templateTexts,c.resourcesText=c.templateTexts.resourcesText,c.fixedCostText=c.templateTexts.fixedCostText,c.unitCostText=c.templateTexts.unitCostText,c.resourcesCalendarsDefinition=a.resourcesCalendarsDefinition,c.resources=ko.observableArray(ko.utils.arrayMap(a.resourcesDefinitions,function(a){var c=ko.utils.arrayFirst(b(),function(b){return a.resourceId==b.resourceId()});return new bizagi.pm.bpsim.resources.ResourcesCostsValuesRow(a,c)}))}}),$.Class("bizagi.pm.bpsim.resources.ResourcesCostsValuesRow",{init:function(a,b){var c=this;c.displayName=a.displayName,c.fixedCostViewModel=new bizagi.pm.bpsim.common.FloatingNumberControl(b.fixedCostValue,!0),c.unitCostViewModel=new bizagi.pm.bpsim.common.FloatingNumberControl(b.unitCostValue,!0)},setSpinner:function(){}}),$.Class("bizagi.pm.bpsim.results.RowEditor",{init:function(a){this.values=ko.observableArray(a)}}),$.Class("bizagi.pm.bpsim.results.TabsEditor",{init:function(a,b,c,d){var e=this;e.exportToExcelText=b,e.printText=c,e.tables=a,e.scenarioInfo=d,e.selectedTableId=ko.observable(""),e.selectedTable={},e.tableListViewModel=ko.observable(),e.selectedTableViewModel=ko.observable(),0!==e.tables().length&&(e.selectedTable=e.tables()[0],e.selectedTableId(e.selectedTable.tableTitle),e.tableListViewModel(new bizagi.pm.bpsim.results.TableSelectionList(e.tables(),e.selectedTableId)),e.selectedTableViewModel(new bizagi.pm.bpsim.results.TableResultsEditor(e.selectedTable.headers,e.selectedTable.footers,e.selectedTable.resultRows,e.selectedTable.id))),e.selectedTableId.subscribe(function(a){e.selectedTable=e.getSelectedTable(e.tables(),a),e.selectedTableViewModel(new bizagi.pm.bpsim.results.TableResultsEditor(e.selectedTable.headers,e.selectedTable.footers,e.selectedTable.resultRows,e.selectedTable.id))})},updateSortedTable:function(a){var b=this;b.selectedTableViewModel(new bizagi.pm.bpsim.results.TableResultsEditor(a.headers,a.footers,a.resultRows,b.selectedTable.id))},getSelectedTable:function(a,b){for(var c=0;c<a.length;c++)if(a[c].tableTitle==b)return a[c]},onTabChanging:function(a){a.cancel=this.cancelTabSelect},jqueryResizeWindow:function(){$(document).ready(function(){setTimeout(function(){calculateResizeHeightResults()},10),$(window).resize(function(){calculateResizeHeightResults()})})}}),$.Class("bizagi.pm.bpsim.results.TableResultsEditor",{init:function(a,b,c,d){var e=this;for(e.tableId=d,e.headers=a,e.footers=ko.observableArray(),void 0!==b&&(this.footers=ko.observable(b)),e.footersLenght=this.footers().length,e.values=ko.observable(c),e.columns=Array(),i=0;i<e.values().length;i++)e.columns.push(ko.observable(new bizagi.pm.bpsim.results.RowEditor(e.values()[i])));e.sortTable=function(a){var b="true";a.isSortColumn===!0&&(b=a.ascendingOrder===!0?"false":"true");var c=0;for(i=0;i<e.headers.length;i++)e.headers[i].displayName==a.displayName?i=e.headers.length:c+=1;window.external.SortSelectedTable(e.tableId,c,b)}}}),$.Class("bizagi.pm.bpsim.results.TableResultsPrintPreview",{init:function(a){var b=this;b.tables=[];for(var c in a)b.tables.push({tableTitle:a[c].tableTitle,tableData:new bizagi.pm.bpsim.results.TableResultsEditor(a[c].headers,a[c].footers,a[c].resultRows)})},initPrintPreview:function(){setTimeout(function(){window.external.ShowPrintPreview()},1e3)}}),$.Class("bizagi.pm.bpsim.results.TableSelectionList",{init:function(a,b){var c=this;c.tables=a,c.selectedTableId=b,c.firstWasSelected=!1}}),ko.bindingHandlers.tableSelectionListClickBinding={init:function(a,b,c,d,e){e.$parent.firstWasSelected||($(a).addClass("ui-selected").siblings().removeClass("ui-selected"),e.$parent.firstWasSelected=!0),$(a).click(function(){$(a).addClass("ui-selected").siblings().removeClass("ui-selected");var b=$(a).attr("id");e.$parent.selectedTableId(b)})}},$.Class("bizagi.pm.bpsim.common.FloatingNumberControl",{init:function(a){var b=this;b.decimalSeparator=b.getDecimalSeparator(),ko.isObservable(a)||(a=ko.observable(a)),b.floatingNumber=ko.observable(a()),""===b.floatingNumber()&&b.floatingNumber(0),b.floatingNumber.subscribe(function(c){-1!=c.indexOf(".")&&(c=c.replace(".",b.decimalSeparator)),""===c&&(c=0),a(c)})},onkeypress:function(a,b){var c=this;return b.which<46||b.which>59?!1:46==b.which&&-1!=a.floatingNumber().indexOf(c.decimalSeparator)?!1:!0},onblur:function(a){var b=a.floatingNumber();return""!==b&&(b.indexOf(a.decimalSeparator)==b.length-1&&(b=b.replace(a.decimalSeparator,"")),a.floatingNumber(b)),!0},getDecimalSeparator:function(){for(var a,b=111111111.1111111.toLocaleString(),c=b.length-1;c>=0;c--){var d=b.charAt(c);if("1"!=d){a=d;break}}return a}}),ko.bindingHandlers.floatingNumberControlJquerySpinner={init:function(a){$(a).setSpinner()}},$.Class("bizagi.pm.bpsim.common.DateTimeControl",{init:function(a){var b=this;b.selectedDateTime=ko.observable(b.getInitialDate(a)),b.selectedDateTime.subscribe(function(c){a=b.mapDateToJson(c,a)})},getInitialDate:function(a){var b=this,c="";if("undefined"!=typeof a&&""!==a){var d=b.getStandardDate(a),e=" AM",f=d.getHours();12===f?e=" PM":0===f?(f=12,e=" AM"):f>=12&&(f-=12,e=" PM"),c=b.padzero(d.getMonth()+1)+"/"+b.padzero(d.getDate())+"/"+b.padzero(d.getFullYear())+" "+b.padzero(f)+":"+b.padzero(d.getMinutes())+":"+b.padzero(d.getSeconds())+e}return c},getStandardDate:function(a){var b="";return"undefined"!=typeof a&&""!==a&&(b=new Date,b.setFullYear(a.year()),b.setDate(a.day()),b.setMonth(a.month()-1),b.setHours(a.hours()),b.setMinutes(a.minutes()),b.setSeconds(a.seconds())),b},padzero:function(a){return 10>a?"0"+a.toString():a.toString()},mapDateToJson:function(a,b){var c=new Date(a);return b.year(c.getFullYear()),b.month(c.getMonth()+1),b.day(c.getDate()),b.hours(c.getHours()),b.minutes(c.getMinutes()),b.seconds(c.getSeconds()),b}}),$.Class("bizagi.pm.bpsim.common.IntegerNumberControl",{init:function(a,b){var c=this;ko.isObservable(a)||(a=ko.observable(a)),c.isVisible=b,c.integerNumber=a},onkeypress:function(a,b){return isNaN(String.fromCharCode(b.keyCode))?!1:!0}}),ko.bindingHandlers.jQueryIntegerNumberControl={init:function(a,b){var c=b();$(a)[c.plugin](c.config),"spinner"===c.plugin&&$(a).parent().click(function(){$(a).change()})},update:function(){}},$.Class("bizagi.koBindings.jqDialog",{init:function(a,b,c){var d=this;d.contentTemplateName=b,d.contentTemplateViewModel=ko.isObservable(c)?c:ko.observable(c),d.isDialogVisible=ko.observable(!1)},getIsOpen:function(){return this.isDialogVisible()},setIsOpen:function(a){this.getIsOpen()!=a&&this.isDialogVisible(a)},open:function(){this.setIsOpen(!0)},close:function(){this.setIsOpen(!1)}}),ko.bindingHandlers.jqDialog={init:function(a,b){var c=ko.utils.unwrapObservable(b())||{},d=c.close;c.close=function(){ko.isObservable(d)&&d(!1)},ko.utils.domNodeDisposal.addDisposeCallback(a,function(){$(a).dialog("destroy")}),$(a).dialog(c)}},ko.bindingHandlers.openDialog={update:function(a,b){var c=ko.utils.unwrapObservable(b());c?$(a).dialog("open"):($(a).dialog("close"),$(a).dialog("destroy").remove())}},$.Class("bizagi.pm.bpsim.levels.levelsCrumb",{init:function(a){var b=this;b.levels=a},getTemplateName:function(){return"bizagi-pm-bpsim-levels-levelsCrumb-Template"}}),ko.bindingHandlers.jQueryLevelsCrumb={init:function(a,b){var c=$(a),d=b();$("body").addClass("levels-body"),c.click(function(){window.external.ChangeLevel(d.data)})}};